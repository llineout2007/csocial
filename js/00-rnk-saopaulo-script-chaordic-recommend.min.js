const RECS_APIKEY="drogariasaopaulo",RECS_URLNAME=window.location,RECS_SEARCH=window.location.search,RECS_POSITION=$(".container-chaordic-vitrine").attr("id"),RECS_CATEGORYID=$(".bread-crumb ul li.last a").text()||$(".bread-crumb ul li.last a span").text(),RECS_PRODUCTID=$("#___rc-p-sku-ids").val()?1<$("#___rc-p-sku-ids").val().split(",").length?$("#___rc-p-sku-ids").val().split(",")[0]:$("#___rc-p-sku-ids").val():void 0;let RECS_PAGENAME=$(".container-chaordic-vitrine").attr("data-name"),RECS_USERID="",RECS_USERLOGIN=!1;$(document).ready(function(){$.recs_atualizarUserId()}),$.recs_stringDiacriticsRemove=function(e){return e=(e=(e=(e=(e=(e=(e=(e=e.replace(new RegExp("[ÁÀÂÃ]","gi"),"A")).replace(new RegExp("[ÉÈÊ]","gi"),"E")).replace(new RegExp("[ÍÌÎ]","gi"),"I")).replace(new RegExp("[ÓÒÔÕ]","gi"),"O")).replace(new RegExp("[ÚÙÛ]","gi"),"U")).replace(new RegExp("[Ç]","gi"),"C")).toLowerCase()).replace(/ /g,"-")},$.recs_dispararEventosGA=function(){try{var e=$(".chaordic-complementares");const t=$(e).find("li:not(.totals-ch)").length,r=$(e).find("h2").slice(0,1).text();var a=$(e).find(".chaordic-buy-button");const s=$(e).find(".collection-link");$(s).each((a,e)=>{$(e).click(e=>{e.preventDefault();e=$(e.target).text(),e=a+1+"/"+t+" - "+e;$.dispararEventoGA("Vitrines - Visualizacao PDP",r+" - Clique",e)})}),$(a).click(function(){let t=[];$(s).each((e,a)=>{t.push($(a).text())}),t=t.join(" + "),$.dispararEventoGA("Vitrines - Visualizacao PDP",r+" - AddToCart",t)})}catch(e){console.log(e)}},$.recs_atualizarUserId=function(){try{vtexjs.checkout.getOrderForm().done(function(e){e.loggedIn&&null!=e.clientProfileData&&(RECS_USERLOGIN=e.loggedIn,RECS_USERID=e.clientProfileData.email),$("body").hasClass("rnk-body-busca-chaordic")?window.addEventListener("chaordic:search:done",e=>{0===e.detail.products.length&&$.recs_carregarRecomendacao()}):$.recs_carregarRecomendacao()})}catch(e){console.log(e)}},$.recs_carregarRecomendacao=function(){try{let e="";$("body").hasClass("rnk-body-home")&&(e=!0===RECS_USERLOGIN?"https://recs.chaordicsystems.com/v0/pages/recommendations?name="+RECS_PAGENAME+"&source="+$.mobileCheck()+"&deviceId="+$.getCookieByName("chaordic_browserId")+"&apiKey="+RECS_APIKEY+"&url="+RECS_URLNAME+"&userIdType=email&userId="+RECS_USERID+"&productFormat=complete&showOnlyAvailable=true":"https://recs.chaordicsystems.com/v0/pages/recommendations?name="+RECS_PAGENAME+"&source="+$.mobileCheck()+"&deviceId="+$.getCookieByName("chaordic_browserId")+"&apiKey="+RECS_APIKEY+"&url="+RECS_URLNAME+"&productFormat=complete&showOnlyAvailable=true"),$("body").hasClass("rnk-body-produto")&&(e=!0===RECS_USERLOGIN?"https://recs.chaordicsystems.com/v0/pages/recommendations?name="+RECS_PAGENAME+"&source="+$.mobileCheck()+"&deviceId="+$.getCookieByName("chaordic_browserId")+"&apiKey="+RECS_APIKEY+"&url="+RECS_URLNAME+"&categoryId="+RECS_CATEGORYID+"&productId="+RECS_PRODUCTID+"&userIdType=email&userId="+RECS_USERID+"&productFormat=complete&showOnlyAvailable=true":"https://recs.chaordicsystems.com/v0/pages/recommendations?name="+RECS_PAGENAME+"&source="+$.mobileCheck()+"&deviceId="+$.getCookieByName("chaordic_browserId")+"&apiKey="+RECS_APIKEY+"&url="+RECS_URLNAME+"&categoryId="+RECS_CATEGORYID+"&productId="+RECS_PRODUCTID+"&productFormat=complete&showOnlyAvailable=true"),$("body").hasClass("rnk-body-busca-chaordic")&&!$(".chaordic-search-list li").length&&(RECS_PAGENAME="emptysearch",e=!0===RECS_USERLOGIN?"https://recs.chaordicsystems.com/v0/pages/recommendations?name="+RECS_PAGENAME+"&source="+$.mobileCheck()+"&deviceId="+$.getCookieByName("chaordic_browserId")+"&apiKey="+RECS_APIKEY+"&url="+RECS_URLNAME+"&userIdType=email&userId="+RECS_USERID+"&productFormat=complete&showOnlyAvailable=true":"https://recs.chaordicsystems.com/v0/pages/recommendations?name="+RECS_PAGENAME+"&source="+$.mobileCheck()+"&deviceId="+$.getCookieByName("chaordic_browserId")+"&apiKey="+RECS_APIKEY+"&url="+RECS_URLNAME+"&productFormat=complete&showOnlyAvailable=true"),$("body").hasClass("rnk-body-para-voce")&&!0===RECS_USERLOGIN&&(e="https://recs.chaordicsystems.com/v0/pages/recommendations?name="+RECS_PAGENAME+"&source="+$.mobileCheck()+"&deviceId="+$.getCookieByName("chaordic_browserId")+"&apiKey="+RECS_APIKEY+"&url="+RECS_URLNAME+"&categoryId="+RECS_CATEGORYID+"&productId="+RECS_PRODUCTID+"&userIdType=email&userId="+RECS_USERID+"&productFormat=complete&showOnlyAvailable=true"),$("body").hasClass("rnk-body-404")&&(e=!0===RECS_USERLOGIN?"https://recs.chaordicsystems.com/v0/pages/recommendations?name="+RECS_PAGENAME+"&source="+$.mobileCheck()+"&deviceId="+$.getCookieByName("chaordic_browserId")+"&apiKey="+RECS_APIKEY+"&url="+RECS_URLNAME+"&userIdType=email&userId="+RECS_USERID+"&productFormat=complete&showOnlyAvailable=true":"https://recs.chaordicsystems.com/v0/pages/recommendations?name="+RECS_PAGENAME+"&source="+$.mobileCheck()+"&deviceId="+$.getCookieByName("chaordic_browserId")+"&apiKey="+RECS_APIKEY+"&url="+RECS_URLNAME+"&userIdType=email&productFormat=complete&showOnlyAvailable=true"),RECS_PAGENAME&&$.getJSON(e,function(t){null==t||$("body").hasClass("rnk-body-busca-chaordic")&&$(".chaordic-search-list li").length||($(".container-chaordic-vitrine").each(function(e,a){"top"===$(this).attr("data-position")&&0<t.top.length&&$.recs_carregarPrateleira("#chaordic-top",t.top[0],t.top[0].displays,t.top[0].name),"middle"===$(this).attr("data-position")&&0<t.middle.length&&$.recs_carregarPrateleira("#chaordic-middle",t.middle[0],t.middle[0].displays,t.middle[0].name),"bottom"===$(this).attr("data-position")&&0<t.bottom.length&&$.recs_carregarPrateleira("#chaordic-bottom",t.bottom[0],t.bottom[0].displays,t.bottom[0].name)}),setTimeout(function(){$.shelf_executarFuncoes(),$.recs_ativarTriggerTrackingProdutoRecs()},500))}).fail(function(e,a,t){})}catch(e){console.log(e)}},$.recs_carregarPrateleira=function(a,t,r,s){try{if(null!=r&&0<r.length)if("Complementares"===s){let m=[];$(r).each(function(e,a){if(null!=a.references&&0<a.references.length&&$(a.references).each(function(e,a){var t=a.skus[0].sku,r=a.skus[0].name,s=a.skus[0].oldPrice,c=a.skus[0].price,o=a.trackingUrl,i=a?.details?.brand||"",l=a?.categories?.[0].name||"";let n=1,d=(null!=a.skus[0].details&&null!=a.skus[0].details.sellers&&0<a.skus[0].details.sellers.length&&$(a.skus[0].details.sellers).each(function(e,a){a.sellerDefault&&(n=a.sellerId)}),""),u=(d=(d=(d=(d+='<li class="rnk-comprejunto-ch ch'+e+"-"+t+'" data-index='+e+">")+('<input type="hidden" class="product-sku" value="'+t+'">')+('<input type="hidden" id="localVenda-'+t+'" value="">'))+('<input type="hidden" class="nomeCategoria-'+t+'" value="'+l+'">')+('<input type="hidden" class="nomeMarca-'+t+'" value="'+i+'">'))+('<div class="comprejunto"><span class="rnk-checkbox"><input type="checkbox" name="ch'+e+"-"+t+'" value="'+c+'" data-oldprice="'+s+'" data-seller="'+n+'" checked><label for="ch'+e+"-"+t+'"><span class="d-none">'+r+"</span></label></span></div>"),"#");a.url&&(u=a.url.includes("api-ads.percycle.com/click/")?a.url:"//"+a.url),d=(d=(d=(d=(d=(d=(d+='<div class="img-prateleira">')+'<a title="'+r+'" href="'+u+'" data-click-url="'+o+'" class="collection-image-link">')+'<img src="//'+a.images["200x200"]+'" alt="'+r+'" width="180" height="180" />')+"</a></div>")+'<div class="buy-unid"></div><div class="d-flex flex-column flex-grow-1">')+'<div class="trustvox-widget-rating" data-trustvox-product-code="'+t+'"></div><div class="descricao-prateleira">')+'<a href="'+u+'" class="collection-link" data-click-url="'+o+'">'+r+'</a><p class="price price-'+t+'">',s!=c&&(d+='<a href="'+u+'" class="valor-de" data-click-url="'+o+'"><span>'+$.maskMoney(s)+"</span></a>"),d=(d=(d=d+('<a href="'+u+'" class="valor-por" data-click-url="'+o+'"><span>'+$.maskMoney(c))+"</span></a></p>")+"</div></div>")+'<span class="icon-round"><span><i class="fal fa-plus"></i></span></span></li>',m.push(d)}),null!=a.recommendations&&0<a.recommendations.length){const p=a.recommendations;$(a.recommendations).each(function(e,a){var t=a.skus[0].sku,r=a.skus[0].name,s=a.skus[0].oldPrice,c=a.skus[0].price,o=a.trackingUrl,i=a?.details?.brand||"",l=a?.categories?.[0].name||"",n=p.length-1,d=1;null!=a.skus[0].details&&null!=a.skus[0].details.sellers&&0<a.skus[0].details.sellers.length&&$(a.skus[0].details.sellers).each(function(e,a){a.sellerDefault&&(d=a.sellerId)});u=(u=(u=(u="")+'<li class="rnk-comprejunto-ch ch'+e+"-"+t+'" data-index='+e+'><input type="hidden" class="product-sku" value="'+t+'">')+'<input type="hidden" id="localVenda-'+t+'" value=""><input type="hidden" class="nomeCategoria-'+t+'" value="'+l+'">')+'<input type="hidden" class="nomeMarca-'+t+'" value="'+i+'"><div class="comprejunto"><span class="rnk-checkbox"><input type="checkbox" name="ch'+e+"-"+t+'" value="'+c+'" data-oldprice="'+s+'" data-seller="'+d+'" checked><label for="ch'+e+"-"+t+'"><span class="d-none">'+r+"</span></label></span></div>";var l="//"+a.url,u=(u=(u=(u+='<div class="img-prateleira">')+'<a title="'+r+'" href="'+l+'" data-click-url="'+o+'" class="collection-image-link"><img src="//'+a.images["200x200"]+'" alt="'+r+'" width="180" height="180" /></a></div><div class="buy-unid"></div><div class="d-flex flex-column flex-grow-1">')+'<div class="trustvox-widget-rating" data-trustvox-product-code="'+t+'"></div><div class="descricao-prateleira">')+'<a href="'+l+'" class="collection-link" data-click-url="'+o+'">'+r+'</a><p class="price price-'+t+'">';s!=c&&(u+='<a href="'+l+'" class="valor-de" data-click-url="'+o+'"><span>'+$.maskMoney(s)+"</span></a>"),u=(u=u+('<a href="'+l+'" class="valor-por" data-click-url="'+o+'"><span>'+$.maskMoney(c))+"</span></a></p></div></div>")+(e==n?'<span class="icon-round"><span><i class="fal fa-equals"></i></span></span>':'<span class="icon-round"><span><i class="fal fa-plus"></i></span></span>')+"</li>",m.push(u)})}});var e="",c=((e+='<li class="rnk-comprejunto-ch totals-ch">')+'<div class="items-msg"><h2>Compre junto <span class="d-block item-colored text-info">No valor de</span></h2></div>'+'<div class="items-total-price">'+'<div class="items-total-price-wrap"><span class="vlr-por"></span><span class="vlr-dividido"><span class="skuBestInstallmentNumber">10</span>x s/juros <span class="skuBestInstallmentValue">R$ 59,99</span></span></div><a target="_top" class="btn btn-primary rnk-btn-between chaordic-buy-button w-100" href="javascript:void(0)">Compre junto<i class="fal fa-shopping-basket"></i></a></div>'+"</li>","");c+='<div class="col container-prateleira chaordic-'+$.recs_stringDiacriticsRemove(s)+'" data-impression='+t.impressionUrl+" >",null!=t&&(c+="<h2>"+t.title+"</h2>"),c=c+("<ul>"+m.join("")+"</ul>")+"</div>",$(a+".container-chaordic-vitrine .row").append(c),$(a+" .container-prateleira.chaordic-"+$.recs_stringDiacriticsRemove(s)+" ul").append('<li class="rnk-comprejunto-ch totals-ch"><div class="items-msg"><h2>Compre junto <span class="d-block item-colored text-info">No valor de</span></h2></div><div class="items-total-price"><div class="items-total-price-wrap"><span class="vlr-por"></span><span class="vlr-dividido"><span class="skuBestInstallmentNumber">10</span>x s/juros <span class="skuBestInstallmentValue">R$ 59,99</span></span></div><a target="_top" class="btn btn-primary rnk-btn-between chaordic-buy-button w-100" href="javascript:void(0)">Compre junto<i class="fal fa-shopping-basket"></i></a></div></li>'),setTimeout(function(){$.recs_compreJuntoActions(a),$.recs_adicionarProdutoCarrinhoCompre(a),$.recs_ativarTriggerImpressUrlCompreJunto(a),$.recs_dispararEventosGA()},800)}else{let c="<ul>",e=($(r).each(function(e,a){null!=a.recommendations&&0<a.recommendations.length&&$(a.recommendations).each(function(e,a){try{var r=null!=a&&null!=a.skus&&a.skus.length?a.skus[0]:a;r&&a.trackingUrl&&(r.trackingUrl=a.trackingUrl+"&source="+$.mobileCheck()+"&deviceId="+$.getCookieByName("chaordic_browserId"));let t=1;r.details&&r.details.sellers&&r.details.sellers.length&&$(r.details.sellers).each(function(e,a){a.sellerDefault&&(t=a.sellerId)});var s=$.shelf_getItem({isAvailable:"available"==r.status,skuId:r.sku||r.id,name:r.name,price:r.price,listPrice:r.oldPrice,clickUrl:r.trackingUrl,sellerId:t,url:"//"+r.url,imgUrl:"//"+r.images["200x200"],quantidadeUnitario:a.details.Quantidade||[],sufixoUnidade:a.details["Sufixo R$/unidade"]||[],descontoPromocao:a.details["Descontos e Promoções"]||[],valorDescontoMinimo:a.details["Valor Desconto Minimo"]||[],flagsDiscount:a.details.flags||[],index:e});c+=s}catch(e){console.log("Ocorreu um erro ao carregar prateleira de recomendados da chaordic",e)}})}),c+="</ul>","");$("body").hasClass("rnk-body-produto")?e+='<div class="col container-prateleira chaordic-'+$.recs_stringDiacriticsRemove(s)+'" data-impression='+t.impressionUrl+" >":e+='<div class="container-prateleira chaordic-'+$.recs_stringDiacriticsRemove(s)+'" data-impression='+t.impressionUrl+" >",null!=t&&(e+="<h2>"+t.title+"</h2>"),e=e+'<div class="prateleira vitrine default n48colunas">'+"</div></div>",($("body").hasClass("rnk-body-produto")?$(a+".container-chaordic-vitrine .row"):$(a+".container-chaordic-vitrine")).append(e),setTimeout(function(){$(a+".container-chaordic-vitrine .container-prateleira .n48colunas").append(c)},500),setTimeout(function(){$.recs_ativarTriggerImpressUrl(a)},500)}}catch(e){console.log(e)}},$.recs_compreJuntoActions=function(e){try{function a(e){let a=$(e+" .chaordic-complementares .rnk-comprejunto-ch.totals-ch .items-msg"),t=$(e+" .chaordic-complementares .rnk-comprejunto-ch.totals-ch .vlr-por"),r=$(e+" .chaordic-complementares .rnk-comprejunto-ch.totals-ch .vlr-de"),s=$(e+" .chaordic-complementares .rnk-comprejunto-ch.totals-ch .items-total-price"),c=$(e+" .chaordic-complementares .rnk-comprejunto-ch.totals-ch .items-total-price a.chaordic-buy-button"),o=[],i=0,l=0,n=0,d=0,u=$(e+" .chaordic-complementares .rnk-comprejunto-ch:nth-child(1)"),p=$(e+" .chaordic-complementares .rnk-comprejunto-ch:nth-child(3)"),m=$(e+" .chaordic-complementares .rnk-comprejunto-ch:nth-child(5)");$(e+" .chaordic-complementares ul li:not(.totals-ch)").each(function(e,a){var t,a=$(a).find(".rnk-checkbox input");a.is(":checked")?($(a).parents("li").removeClass("disabled"),l+=parseFloat($(a).attr("data-oldprice")),i+=parseFloat($(a).val()),t="sku="+$(a).attr("name").split("-")[1]+"&qty=1&seller="+$(a).attr("data-seller"),o.push(t)):$(a).parents("li").addClass("disabled")}),n+=parseFloat(l),d+=parseFloat(i),parseInt(100*d/n),r.html($.maskMoney(n)),t.html($.maskMoney(d)),u.hasClass("disabled")&&p.hasClass("disabled")&&m.hasClass("disabled")?(a.find("h2").html('Selecione os itens e  <span class="item-colored text-info">compre</span>'),s.find(".title-price").css("color","transparent"),t.css("color","transparent"),c.attr("href","javascript:void(0)"),c.addClass("disabled")):(c.removeClass("disabled"),c.attr("href","/checkout/cart/add?"+o.join("&")+"&redirect=true&sc=1"))}a(e),$(e).change(function(){a(e)})}catch(e){console.log(e)}},$.recs_adicionarProdutoCarrinhoCompre=function(e){try{$(e).find("a.chaordic-buy-button").each((e,a)=>{const r=$.btn($(a));$(a).click(function(e){e.preventDefault();e=$(e.currentTarget).attr("href");if("javascript:void(0)"==e)return!1;r.addLoading(),$.ajax({type:"GET",url:e,contentType:"application/json"}).done(function(t){r.addSuccess();try{$(".rnk-comp-compre-junto li").each((e,a)=>{e<2&&$.despacharEventoCustomizado("checkout:addToCart:done",{response:t,target:$(a).find('[class*="product-sku"]'),qty:1})})}catch(e){console.log(e)}try{$.header_atualizaQuantidadeItensCarrinho()}catch(e){console.log(e)}try{let t=[];$(".rnk-comp-compre-junto li").each((e,a)=>{e<2&&t.push($(a).find(".product-sku").val())}),$.header_exibirProdutoAdicionadoCarrinho.apply(null,t)}catch(e){console.log(e)}})})})}catch(e){console.log(e)}},$.recs_ativarTriggerCompreJunto=function(){try{$(".chaordic-complementares ul li a:not(.chaordic-buy-button)").unbind("click"),$(".chaordic-complementares ul li a:not(.chaordic-buy-button)").click(function(e){e.preventDefault();let a=$(this).attr("href");e=$(this).attr("data-click-url")+"&source="+$.mobileCheck()+"&deviceId="+$.getCookieByName("chaordic_browserId");$.getJSON(e,function(e){}),-1==a.indexOf("/checkout")&&setTimeout(function(){document.location.href=a},50)})}catch(e){console.log(e)}},$.recs_ativarTriggerImpressUrlCompreJunto=function(r){try{var s=$(r+" .chaordic-complementares > ul");if(!s.length)return!1;let e=$(r+" .chaordic-complementares").attr("data-impression"),a=s.offset().top-$(window).height(),t=0;$(window).scroll(function(){$(window).scrollTop()>a&&0===t&&($.getJSON(e+"&firstOffset=0&lastOffset=1"),t=1)})}catch(e){console.log(e)}},$.recs_ativarTriggerTrackingProdutoRecs=function(){try{$(".container-chaordic-vitrine [data-click-url]").on("click",function(e){e.preventDefault();let a=$(e.currentTarget).attr("href");e=$(e.currentTarget).attr("data-click-url");e&&e.length&&$.getJSON(e),a&&a.length&&a.indexOf("/checkout")<0&&(executarTriggerSelectItem($(this)),setTimeout(function(){document.location.href=a},100))})}catch(e){console.log(e)}},$.recs_ativarTriggerImpressUrl=function(c){try{let e=$(c+" .prateleira > ul"),a=$(c+" .container-prateleira").attr("data-impression"),t,r,s=(e.length&&(r=$(window).height()-e.offset().top),!0);const o=function(){$(window).scrollTop()>r&&(t=e.find("> li").filter(":last").attr("data-index"),s)&&(s=!1,$.getJSON(a+"&firstOffset=0&lastOffset="+t,function(){$(window).unbind("scroll",o)}))};$(window).on("scroll",o)}catch(e){console.log(e)}};