const ADD_TO_CART_EVENT_NAME="add_to_cart_gtm",REMOVE_FROM_CART_EVENT_NAME="remove_from_cart",PURCHASE_EVENT_NAME="purchase",SYNERISE_TRACKER_KEY="ea8923c1-a8e5-49af-99c0-30f6447f0ccf",SYNERISE_SDK_URL="https://web.snrbox.com/synerise-javascript-sdk.min.js";function isDataLayerLoaded(){return void 0!==window.dataLayer}function getPageData(){if(isDataLayerLoaded()){if(void 0!==window.pageData)return console.log("pageData is cached"),window.pageData;if(Array.isArray(window.dataLayer))for(const e of window.dataLayer)if(e.hasOwnProperty("pageCategory"))return console.log("Found object in dataLayer and created pageData"),window.pageData={...e,skuId:e.productReferenceId??e.productId},console.log(window.pageData),window.pageData;return null}console.log("Data layer is not loaded.")}function fromVtexAddToCart(e){var t=e.ecommerce.items[0];return{event:"addToCart",ecommerce:{currencyCode:e.ecommerce.currency,add:{products:[{name:t.item_name,id:t.item_id,price:t.price.toString(),brand:t.item_brand,category:t.item_category,variant:t.item_variant||"",quantity:t.quantity}]}}}}function fromVtexRemoveFromCart(e){var t=e.ecommerce.items[0];return{event:"removeFromCart",ecommerce:{currencyCode:e.ecommerce.currency,remove:{products:[{name:t.item_name,id:t.item_id,price:t.price.toString(),brand:t.item_brand,category:t.item_category,variant:t.item_variant||"",quantity:t.quantity}]}}}}function fromVtexPurchase(t){return{ecommerce:{purchase:{actionField:{id:t.ecommerce.transaction_id,affiliation:t.ecommerce.affiliation||"",revenue:t.ecommerce.value.toString(),tax:t.ecommerce.tax||"",shipping:t.ecommerce.shipping||"",coupon:t.ecommerce.coupon||""},products:t.ecommerce.items.map(e=>({name:e.item_name,id:e.item_id,price:e.price.toString(),brand:e.item_brand,category:e.item_category,variant:e.item_variant||"",quantity:e.quantity,coupon:t.coupon||""}))}}}}function isEventType(e,t){return!(!e||"object"!=typeof e)&&e.event==t}function monitorPush(){const o=window.dataLayer.push.bind(window.dataLayer);window.dataLayer.push=function(e){o(e);try{var t,a,r;isEventType(e,ADD_TO_CART_EVENT_NAME)?(t=fromVtexAddToCart(e),o(t)):isEventType(e,REMOVE_FROM_CART_EVENT_NAME)?(a=fromVtexRemoveFromCart(e),o(a)):isEventType(e,PURCHASE_EVENT_NAME)&&(r=fromVtexPurchase(e),o(r))}catch(e){console.log(e)}}}function setupPageOpenGraphTags(){var e=getPageData();if(e&&"Product"===e.pageCategory){var t,a,e={"og:title":e.pageTitle,"og:url":e.pageUrl,"og:type":"product","product:brand":e.productBrandName,"product:condition":"new","product:price:amount":e.productPriceTo,"product:price:currency":"BRL","product:retailer_item_id":e.skuId,"product:retailer_part_no":e.productId,"product:item_group_id":e.productCategoryId,"product:name":e.productName,"product:id":e.productId,"product:category":e.productCategoryName};for([t,a]of Object.entries(e))if(a){let e=document.querySelector(`meta[property="${t}"]`);e?e.setAttribute("content",a):((e=document.createElement("meta")).setAttribute("property",t),e.setAttribute("content",a),document.head.appendChild(e))}}}function getCookieValue(e){var t,a=e+"=";for(t of document.cookie.split(";"))if((t=t.trim()).startsWith(a))return t.substring(a.length);return null}async function updateUser(){var e=getCookieValue("_snrs_puuid")||getCookieValue("_snrs_uuid");window.pageData&&(window.pageData.snrsUuid=e)}document.addEventListener("DOMContentLoaded",function(){setupPageOpenGraphTags(),monitorPush()}),document.addEventListener("skuDataReceived",function(){var t=getPageData();t&&(t.productName=e.name,t.skuId=e.id,window.pageData=t,setupPageOpenGraphTags())});const onSyneriseLoad=()=>{dataLayer?(SR.init({trackerKey:SYNERISE_TRACKER_KEY,dataLayer:dataLayer}),updateUser()):console.error("Data layer is not loaded.")};!function(e,t,a,r,o,n,i){e.SyneriseObjectNamespace=o,e.SR=e.SR||[],e.SR._t=+new Date,e.SR._i=0,e.SR._l=n;var c=t.createElement(a),i=t.getElementsByTagName(a)[0];c.async=1,c.src=r,i.parentNode.insertBefore(c,i),c.onload=c.onreadystatechange=function(){c.readyState&&!/complete|loaded/.test(c.readyState)||(onSyneriseLoad(),c.onload=null,c.onreadystatechange=null)}}(window,document,"script",SYNERISE_SDK_URL,"SR",onSyneriseLoad.name);